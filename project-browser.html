<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <title>Portfolio</title>
  <style>
    body {
      font-family: 'Roboto', Arial, sans-serif;
      font-size: 16px;
      line-height: 1.15;
      margin: 20px;
      background: white;
      height: 600px; /* adjust to what looks good on mobile */      
    }

    p, li {
      margin-top: 6px;   /* paragraph spacing before */
      margin-bottom: 0px; /* paragraph spacing after */
      font-size: 16px;   /* increase from 14px to 16px */
    }

    h2, h3, h4, h5, h6 {
      font-family: 'Roboto', Arial, sans-serif;
      line-height: 1.15;
      margin-top: 6px;
      margin-bottom: 0px;
    }

    * {
      box-sizing: border-box;
      line-height: 1.15;
      font-family: 'Roboto', Arial, sans-serif;
    }

    .portfolio-wrapper {
      border: 1px solid #ccc;   /* border around entire portfolio */
      padding: 20px;            /* spacing so content isn’t stuck to border */
      border-radius: 0px;       /* optional: rounded corners */
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 20px;
      font-size: 14px;
      color: darkgray;
      align-items: flex-start;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
      flex: 0 0 auto;
    }

    .filter-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    
    .filter-buttons button {
      padding: 10px 15px;
      border: 1px solid lightgray; /* keeps space reserved */
      border-top: 1px solid lightgray; /* reserve space for 3px top border */
      background: transparent;
      color: #555; /* dark gray text */
      font-size: 14px;
      cursor: pointer;
      transition: box-shadow 0.125s ease, border-color 0.125s ease;
      position: relative;
    }
    
    .filter-buttons button:hover {
      border-color: black; /* thin black border on hover */

      box-shadow: inset 0 3px 0 0 black; /* 3px top line, like projects */
    }
    
    .filter-buttons button.active {
      background: black;
      color: white;
      border-color: black;
      box-shadow: inset 0 3px 0 0 black; /* black top line */
    }
    
    .filter-buttons button.active:hover {
      background: #333; /* dark gray background instead of full black */
      color: white;
      border-color: #333;
      box-shadow: inset 0 3px 0 0 white; /* white top line, clearly visible */
    }

    .projects {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    
    .project {
      display: flex;
      align-items: flex-start;
      gap: 15px;
      border: 1px solid #ccc; /* regular border for all sides */
      border-top: 1px solid #ccc; /* keep layout consistent */
      padding: 10px;
      text-decoration: none;
      color: black;
      transition: box-shadow 0.125s ease;
      position: relative;
    }
    
    .project:hover {
      /* visual top border appears */
      box-shadow: inset 0 3px 0 0 black; /* 3px top line */
      border-color:black;
    }
    
    .project:hover h2 {
      text-decoration: underline;
    }
    
    .thumbnail {
      width: 124px;
      height: 124px;
      background: lightgray;
      flex-shrink: 0;
      object-fit: cover;
    }
    
    .project-info {
      flex: 1;
    }
    
    .project h2 {
      margin: 0;
      font-size: 20px;
      text-decoration: underline;
      text-decoration-color: transparent;
    }
    
    .project p {
      margin: 5px 0;
    }
    
    .project a {
    	color: black;
    }
    
    .release-date {
      color: darkgray;
      font-size: 16px;
    }
    
    .tags {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    
    .tag {
      padding: 4px 8px;
      background: #ebebeb; /* subtle light gray */
      font-size: 14px;
      color: #555; /* dark gray text */
    }
    
    .no-results {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem;
      background: #fffbea;
      border: 1px solid #facc15; /* amber-400 style */

      margin: 1rem 0;
      text-align: center;
      font-size: 0.95rem;
      color: #78350f;
    }

    .no-results.hidden {
      display: none;
    }

    .no-results-content {
      max-width: 400px;
    }

    .no-results .icon {
      font-size: 1.5rem;
      display: block;
      margin-bottom: 0.5rem;
    }

    #reset-filters {
      margin-top: 0.75rem;
      padding: 0.5rem 1rem;
      background: #facc15;
      border: none;

      cursor: pointer;
      transition: background 0.2s ease-in-out;
    }

    #reset-filters:hover {
      background: #eab308;
    }

    .drive-debug {
      margin-top: 6px;
      font-size: 12px;
      color: #777;
    }
    
    .drive-debug a { color: #777; text-decoration: none; }
    .drive-debug a:hover { text-decoration: underline; color: #333; }

  .filter-buttons {
    gap: 6px;
  }
  
  .filter-buttons button {
    padding: 6px 10px;
    font-size: 12px;
  }
  
   /* Tablet: single column, moderately small thumbnails */
   @media (max-width: 1200px) {
  	.projects {
    grid-template-columns: 1fr;
  }
  
  /* Phone: single column, tiny thumbnails */
  @media (max-width: 600px) {
    .projects {
      grid-template-columns: 1fr;
    }

    .thumbnail {
      width: 64px;
      height: 64px;
    }
    
    .filter-buttons {
      gap: 4px;
    }
    
    .filter-buttons button {
      padding: 4px 6px;
      font-size: 12px;
    }
  }
}

</style>
</head>
<body>
 <div class="portfolio-wrapper">
  <div class="filters">
    <div class="filter-group">
      <div>Type:</div>
      <div class="filter-buttons" id="typeFilters"></div>
    </div>
    <div class="filter-group">
      <div>Engine:</div>
      <div class="filter-buttons" id="engineFilters"></div>
    </div>
    <div class="filter-group">
      <div>Language:</div>
      <div class="filter-buttons" id="languageFilters"></div>
    </div>
    <div class="filter-group">
      <div>Platform:</div>
      <div class="filter-buttons" id="platformFilters" ></div>
    </div>
    <div class="filter-group">
      <div>Work period:</div>
      <div class="filter-buttons" id="periodFilters"></div>
    </div>
  </div>

  <div class="projects" id="projects"></div>
  <!-- Empty state message (hidden until triggered) -->
  <div id="no-results" class="no-results hidden">
    <div class="no-results-content">
      <span class="icon">⚠️</span>
      <p>No projects found.<br>
       Try adjusting or resetting the filters to see more results.
     </p>
     <button id="reset-filters">Reset Filters</button>
   </div>
 </div>

</div>
<script>
    // ---------- data ----------
 
  const projects = [
      // -------- Professional --------
    {
      title: "Vampire: The Masquerade - Bloodhunt",
      url: "https://sites.google.com/view/arno-de-keukelaere/professional-work/vampire-the-masquerade-bloodhunt",
      description: "Battle royale game with vampires set in the World of Darkness universe.",
      release: 2022,
      thumbnail: "https://drive.google.com/uc?export=view&id=1G_RjQ7v68WaMPw2m0nbQo_YXP7MF6sKR",
      driveViewer: "https://drive.google.com/file/d/1G_RjQ7v68WaMPw2m0nbQo_YXP7MF6sKR/view",
      tags: ["Professional", "C++", "Unreal", "2020s"],
      platforms: ["PC", "Console"]
    },
    {
      title: "Mafia II: Definitive Edition",
      url: "https://sites.google.com/view/arno-de-keukelaere/professional-work/mafia-ii-definitive-edition",
      description: "Remaster of the 2010 action-adventure game Mafia II.",
      release: 2020,
      thumbnail: "https://lh3.googleusercontent.com/d/1pOwXrDkbjVrzr9DrUZsXCH_zupkAtBfP",
      driveViewer: "https://drive.google.com/file/d/1pOwXrDkbjVrzr9DrUZsXCH_zupkAtBfP/view",
      tags: ["Professional", "C++", "Other", "2020s"],
      platforms: ["PC", "Console"]
    },
    {
      title: "Fundels",
      url: "https://sites.google.com/view/arno-de-keukelaere/professional-work/fundels",
      description: "Audio book app for children's books on iOS and Android.",
      release: 2019,
      thumbnail: "https://lh3.googleusercontent.com/d/1xcSyw_hpPMbwmdsFBM_HjtPPXqZe5zIt",
      driveViewer: "https://drive.google.com/file/d/1xcSyw_hpPMbwmdsFBM_HjtPPXqZe5zIt/view",
      tags: ["Professional", "C#", "Unity", "2010s"],
      platforms: ["Mobile"]
    },
    {
      title: "Spielespass",
      url: "https://sites.google.com/view/arno-de-keukelaere/professional-work/spielespass",
      description: "A collection of Hasbro and Mattel mobile games for Android.",
      release: 2018,
      thumbnail: "https://lh3.googleusercontent.com/d/1crpPlmteajPE-1GNiSIlbjdzfD5JU1TP",
      driveViewer: "https://drive.google.com/file/d/1crpPlmteajPE-1GNiSIlbjdzfD5JU1TP/view",
      tags: ["Professional", "C#", "Unity", "2010s"],
      platforms: ["Mobile"]
    },
    {
      title: "De Stemmels",
      url: "https://sites.google.com/view/arno-de-keukelaere/professional-work/de-stemmels",
      description: "VR/AR educational boardgame for iOS and Android.",
      release: 2023,
      thumbnail: "https://lh3.googleusercontent.com/d/1R5PCZ05WlkIvF7A2GCe8Unqz1yCXgfes",
      driveViewer: "https://drive.google.com/file/d/1R5PCZ05WlkIvF7A2GCe8Unqz1yCXgfes/view",
      tags: ["Professional", "C#", "Unity", "2010s"],
      platforms: ["Mobile"]
    },
      // -------- Personal --------
    {
      title: "404",
      url: "https://thefuryofblood.github.io/",
      description: "A minigame created over a weekend as a fun easter egg that replaces the 404 error page for my old portfolio. (Requires a keyboard)",
      release: 2018,
      thumbnail: "https://lh3.googleusercontent.com/d/14pYPvhPDQUibD3XiuiLH6E65Y60iHdqF",
      driveViewer: "https://drive.google.com/file/d/14pYPvhPDQUibD3XiuiLH6E65Y60iHdqF/view",
      tags: ["Personal", "C#", "Unity", "2010s"],
      platforms: ["PC"]
    },
    {
      title: "Neko-Pakku Crash!",
      url: "https://sites.google.com/view/arno-de-keukelaere/personal-projects/neko-pakku-crash",
      description: "Simple 2D 'Hop and bop' platformer.",
      release: 2014,
      thumbnail: "https://lh3.googleusercontent.com/d/16g6X6TCmK77H9Vt0Oeazs9IRVH-Gs1nO",
      driveViewer:"https://drive.google.com/file/d/16g6X6TCmK77H9Vt0Oeazs9IRVH-Gs1nO/view?usp=drive_link",
      tags: ["Personal", "C#", "Stencyl", "2010s"],
      platforms: ["PC"]
    },
    {
      title: "Cinema Utilities",
      url: "https://steamcommunity.com/sharedfiles/filedetails/?id=157406384",
      description: "A simple addon for Garry's Mod (Source Engine). Contains some commonly used console commands attached to buttons and other UI elements using Lua.",
      release: 2013,
      thumbnail: "",
      driveViewer:"https://drive.google.com/file/d/1e-GUe1gGQpu7LF8AoG8LffCbXOJpikNv/view?usp=drive_link",
      tags: ["Personal", "Lua", "2010s"]
    },
    {
      title: "Industrial Cleansing",
      url: "https://sites.google.com/view/arno-de-keukelaere/personal-projects/industrial-cleansing",
      description: "Physics sim dish cleaning game. You get 33 seconds to clean each batch of objects.",
      release: 2025,
      thumbnail: "https://lh3.googleusercontent.com/d/15V3wha3wV2KCw-Hnm3om08BGbDRjGiy4",
      driveViewer:"https://drive.google.com/file/d/15V3wha3wV2KCw-Hnm3om08BGbDRjGiy4/view?usp=drive_link",
      tags: ["Personal", "C#", "s&box", "2020s"],
      platforms: ["PC"]
    },
    {
      title: "Labyrinth",
      url: "https://sites.google.com/view/arno-de-keukelaere/personal-projects/labyrinth",
      description: "A 48-hour game jam game, made with colleges from d3t, about escaping a labyrinth plagued by a minotaur.",
      release: 2022,
      thumbnail: "https://lh3.googleusercontent.com/d/1HfhxB2Cyl2IDerna93NqqUvP-wRUTNqJ",
      driveViewer:"https://drive.google.com/file/d/1HfhxB2Cyl2IDerna93NqqUvP-wRUTNqJ/view?usp=drive_link",
      tags: ["Personal", "C#", "Unity", "2020s"],
      platforms: ["PC"]
    }
  ];

  const filters = {
    Type: ["Personal", "Professional"],
    Engine: ["Unity", "Unreal", "Other"],
    Language: ["C#", "C++"],
    Platform: ["PC", "Console", "Mobile"], 
    Period: ["2020s", "2010s"]
  };

    // set default ON: Professional, Personal, 2020s
  const activeFilters = { 
    Type: new Set(), 
    Engine: new Set(), 
    Language: new Set(), 
    Platform: new Set(),
    Period: new Set(["2020s"])
  };

    // ---------- helpers ----------
  function extractDriveId(url) {
    if (!url) return null;
    let m = url.match(/\/d\/([a-zA-Z0-9_-]+)/);
    if (m) return m[1];
    m = url.match(/[?&]id=([a-zA-Z0-9_-]+)/);
    if (m) return m[1];
    if (/^[a-zA-Z0-9_-]{10,}$/.test(url)) return url;
    return null;
  }

  function makeDriveCandidates(fileId) {
    if (!fileId) return [];
    return [
      `https://drive.google.com/uc?export=view&id=${fileId}`,
      `https://drive.google.com/thumbnail?id=${fileId}`,
      `https://drive.googleusercontent.com/uc?id=${fileId}&export=download`,
      `https://drive.google.com/uc?export=download&id=${fileId}`
    ];
  }

  function loadImageWithFallback(imgEl, originalUrl, driveViewerUrl) {
    const candidates = [];
    if (originalUrl) candidates.push(originalUrl);
    const driveId = extractDriveId(originalUrl || driveViewerUrl);
    if (driveId) {
      makeDriveCandidates(driveId).forEach(c => {
        if (!candidates.includes(c)) candidates.push(c);
      });
    }
    const placeholder = "https://via.placeholder.com/200?text=Image+unavailable";
    if (!candidates.includes(placeholder)) candidates.push(placeholder);

    let idx = 0;
    const tryNext = () => {
      if (idx >= candidates.length) {
        appendDriveDebugLink(imgEl, driveViewerUrl);
        return;
      }
      const url = candidates[idx++];
      let settled = false;
      const timeoutId = setTimeout(() => {
        if (settled) return;
        settled = true;
        tryNext();
      }, 5000);
      imgEl.onload = () => {
        if (settled) return;
        settled = true;
        clearTimeout(timeoutId);
        removeDriveDebugLink(imgEl);
      };
      imgEl.onerror = () => {
        if (settled) return;
        settled = true;
        clearTimeout(timeoutId);
        tryNext();
      };
      imgEl.src = url;
    };
    tryNext();
  }

  function appendDriveDebugLink(imgEl, driveViewerUrl) {
    const parent = imgEl.parentNode;
    if (!parent) return;
    if (parent.querySelector('.drive-debug')) return;
    if (!driveViewerUrl) return;
    const dbg = document.createElement('div');
    dbg.className = 'drive-debug';
    dbg.innerHTML = `<a href="${driveViewerUrl}" target="_blank" rel="noopener">Open image in Drive (check sharing)</a>`;
    parent.appendChild(dbg);
  }
  function removeDriveDebugLink(imgEl) {
    const parent = imgEl.parentNode;
    if (!parent) return;
    const dbg = parent.querySelector('.drive-debug');
    if (dbg) dbg.remove();
  }

    // ---------- UI rendering ----------
  function renderFilters() {
    for (const [key, values] of Object.entries(filters)) {
      const container = document.getElementById(key.toLowerCase() + "Filters");
      container.innerHTML = "";
      values.forEach(value => {
        const btn = document.createElement("button");
        btn.textContent = value;

          // check default active
        if (activeFilters[key].has(value)) {
          btn.classList.add("active");
        }

        btn.onclick = () => {
          if (activeFilters[key].has(value)) {
            activeFilters[key].delete(value);
            btn.classList.remove("active");
          } else {
            activeFilters[key].add(value);
            btn.classList.add("active");
          }
          renderProjects();
        };
        container.appendChild(btn);
      });
    }
  }

  function renderProjects() {
    const container = document.getElementById("projects");
    container.innerHTML = "";

    let filtered = projects.filter(p => {
      return (!activeFilters.Type.size || [...activeFilters.Type].some(f => p.tags.includes(f)))
      && (!activeFilters.Engine.size || [...activeFilters.Engine].some(f => {
        if (f === "Other") {
              // Match projects that do NOT have Unity or Unreal
          return !p.tags.includes("Unity") && !p.tags.includes("Unreal");
        }
        return p.tags.includes(f);
      }))
      && (!activeFilters.Language.size || [...activeFilters.Language].some(f => p.tags.includes(f)))
      && (!activeFilters.Period.size || [...activeFilters.Period].some(f => p.tags.includes(f)))
      && (!activeFilters.Platform.size || (p.platforms && [...activeFilters.Platform].some(f => p.platforms.includes(f))));
    });

    filtered.sort((a, b) => b.release - a.release);

    filtered.forEach(p => {
      const a = document.createElement("a");
      a.href = p.url || "#";
      a.className = "project";
      a.target = "_blank";
      a.rel = "noopener";

      const thumb = document.createElement("img");
      thumb.className = "thumbnail";
      thumb.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";
      a.appendChild(thumb);
      loadImageWithFallback(thumb, p.thumbnail, p.driveViewer);

      const info = document.createElement("div");
      info.className = "project-info";

      const title = document.createElement("h2");
      title.textContent = p.title;
      info.appendChild(title);

      const desc = document.createElement("p");
      desc.textContent = p.description;
      info.appendChild(desc);

      const date = document.createElement("p");
      date.textContent = "Release date: " + p.release;
      date.className = "release-date";
      info.appendChild(date);

		// Render tags
      const tagsDiv = document.createElement("div");
      tagsDiv.className = "tags";
      p.tags.forEach(t => {
        const span = document.createElement("span");
        span.className = "tag";
        span.textContent = t;
        tagsDiv.appendChild(span);
      });
      info.appendChild(tagsDiv);

		// Render platforms
      if (p.platforms) {
        p.platforms.forEach(f => {
          const span = document.createElement('span');
          span.className = 'tag';
          span.textContent = f;
          tagsDiv.appendChild(span);
        });
      }
      
      a.appendChild(info);
      container.appendChild(a);
    });
    
    
      // check after rendering
    checkResults(); 
  }

  
    // Example: show warning if no results
  function checkResults() {
    const results = document.querySelectorAll('.project');
    const noResults = document.getElementById('no-results');
    
    if (results.length === 0) {
      noResults.classList.remove('hidden');
    } else {
      noResults.classList.add('hidden');
    }
  }

    // initial render
  renderFilters();
  renderProjects();
  
  document.getElementById('reset-filters').addEventListener('click', () => {
  // Clear all active filters
    for (const key in activeFilters) {
      activeFilters[key].clear();
    }
    
  // Re-render filters and projects
    renderFilters();
    renderProjects();
  });

</script>
</body>
</html>
